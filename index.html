<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello ⋅ thurs.top</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{height:100vh;background:linear-gradient(-45deg,#ee7752,#e73c7e,#23a6d5,#23d5ab);background-size:400% 400%;animation:g 15s ease infinite;font-family:'Poppins',sans-serif;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;color:white}
        @keyframes g{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        h1{font-size:10rem;font-weight:900;text-shadow:0 20px 40px rgba(0,0,0,.3);animation:f 6s ease-in-out infinite;margin-bottom:20px}
        @keyframes f{0%,100%{transform:translateY(0)}50%{transform:translateY(-30px)}}
        p{font-size:1.8rem;opacity:0;animation:i 1s forwards 1s;margin-bottom:40px}
        @keyframes i{to{opacity:1}}
        button{background:rgba(255,255,255,0.2);border:3px solid white;border-radius:20px;padding:16px 40px;font-size:1.8rem;font-weight:700;cursor:pointer;backdrop-filter:blur(10px);transition:.3s}
        button:hover{transform:scale(1.1);background:rgba(255,255,255,0.4)}
        
        /* 2048 游戏面板 */
        #game2048{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);backdrop-filter:blur(12px);z-index:999;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s}
        #game2048.active{opacity:1;pointer-events:all}
        .game-container{background:#111;border-radius:20px;padding:20px;box-shadow:0 20px 60px rgba(0,0,0,0.6);position:relative;width:480px;max-width:95vw}
        .close{position:absolute;top:10px;right:15px;font-size:50px;cursor:pointer;z-index:10}
        #score{display:absolute;top:15px;left:20px;font-size:24px;font-weight:700}
        #grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;background:#000;padding:12px;border-radius:12px;margin-top:60px}
        .tile{position:relative;width:100%;height:100px;background:#222;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:40px;font-weight:900;color:white;transition:all .15s}
        .tile::before{content:'';display:block;padding-top:100%}
        .tile span{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
        @media(max-width:768px){h1{font-size:5.5rem}p{font-size:1.3rem}button{font-size:1.4rem;padding:12px 30px}.game-container{width:96vw}}
    </style>
</head>
<body>
    <h1>Hello</h1>
    <p>欢迎来到 thurs.top</p>
    <button onclick="document.getElementById('game2048').classList.add('active')">开始玩 2048</button>

    <div id="game2048">
        <div class="game-container">
            <div class="close" onclick="document.getElementById('game2048').classList.remove('active')">×</div>
            <div id="score">得分: 0</div>
            <div id="grid"></div>
        </div>
    </div>

<script>
    const grid = document.getElementById('grid');
    const scoreEl = document.getElementById('score');
    let tiles = [];
    let score = 0;

    const colors = {
        0:'#000',2:'#eee4da',4:'#ede0c8',8:'#f2b179',16:'#f59563',32:'#f67c5f',
        64:'#f65e3b',128:'#edcf72',256:'#edcc61',512:'#edc850',1024:'#edc53f',2048:'#edc22e'
    };

    function initGame(){
        tiles = Array(16).fill(0);
        score = 0; scoreEl.textContent = '得分: 0';
        grid.innerHTML = '';
        addNewTile(); addNewTile();
        render();
    }

    function addNewTile(){
        const empty = tiles.map((v,i)=>v===0?i:null).filter(v=>v!==null);
        if(empty.length===0) return;
        const pos = empty[Math.floor(Math.random()*empty.length)];
        tiles[pos] = Math.random()<0.9?2:4;
    }

    function render(){
        grid.innerHTML = '';
        tiles.forEach((val,i)=>{
            const tile = document.createElement('div');
            tile.className = 'tile';
            if(val){
                tile.style.background = colors[val] || '#edc22e';
                tile.innerHTML = `<span>${val}</span>`;
                tile.style.transform = 'scale(0)';
                setTimeout(()=>tile.style.transform='scale(1)',10);
            }
            grid.appendChild(tile);
        });
    }

    function move(dir){
        let moved = false;
        const old = [...tiles];
        if(dir==='left' || dir==='right'){
            for(let row=0;row<4;row++){
                let line = tiles.slice(row*4,row*4+4).filter(v=>v);
                if(dir==='right') line.reverse();
                for(let i=0;i<line.length-1;i++){
                    if(line[i]===line[i+1]){
                        line[i]*=2; score+=line[i]; line[i+1]=0; moved=true;
                    }
                }
                line = line.filter(v=>v);
                while(line.length<4) dir==='left'?line.push(0):line.unshift(0);
                if(dir==='right') line.reverse();
                for(let i=0;i<4;i++) tiles[row*4+i] = line[i];
            }
        }else{
            for(let col=0;col<4;col++){
                let line = [tiles[col],tiles[col+4],tiles[col+8],tiles[col+12]].filter(v=>v);
                if(dir==='down') line.reverse();
                for(let i=0;i<line.length-1;i++){
                    if(line[i]===line[i+1]){
                        line[i]*=2; score+=line[i]; line[i+1]=0; moved=true;
                    }
                }
                line = line.filter(v=>v);
                while(line.length<4) dir==='up'?line.push(0):line.unshift(0);
                if(dir==='down') line.reverse();
                [0,1,2,3].forEach((_,i)=>tiles[col+i*4]=line[i]);
            }
        }
        if(JSON.stringify(old)!==JSON.stringify(tiles)){moved=true; addNewTile();}
        if(moved){scoreEl.textContent=`得分: ${score}`; render();}
        if(tiles.every(v=>v!==0) && !canMove()) setTimeout(()=>alert('Game Over!\n最终得分: '+score),300);
    }

    function canMove(){
        for(let i=0;i<16;i++){
            if(tiles[i]===0) return true;
            if(i%4<3 && tiles[i]===tiles[i+1]) return true;
            if(i<12 && tiles[i]===tiles[i+4]) return true;
        }
        return false;
    }

    document.addEventListener('keydown',e=>{
        if(!document.getElementById('game2048').classList.contains('active')) return;
        if(e.key==='ArrowLeft') move('left');
        if(e.key==='ArrowRight') move('right');
        if(e.key==='ArrowUp') move('up');
        if(e.key==='ArrowDown') move('down');
    });

    // 启动游戏
    document.querySelector('button').addEventListener('click',()=>{initGame();});
    initGame(); // 首次自动初始化
</script>
</body>
</html>
